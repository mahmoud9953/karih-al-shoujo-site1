---
import Base from "../layouts/Base.astro";
const pageTitle = "تسجيل الدخول";
---

<Base title={pageTitle}>
  <section dir="rtl" style="
    min-height:calc(100vh - 120px);
    display:grid; place-items:center;
    background:
      radial-gradient(1200px 600px at 80% -10%, rgba(139,92,246,.15), transparent 60%),
      radial-gradient(900px 500px at -10% 110%, rgba(6,182,212,.12), transparent 60%);
  ">
    <div class="glass" style="width:min(92vw,560px); padding:28px 26px 24px;">
      <header style="display:grid; gap:8px; justify-items:center; margin-bottom:18px;">
        <svg viewBox="0 0 48 48" width="52" height="52" aria-hidden="true">
          <circle cx="24" cy="24" r="22" fill="none" stroke="#8b5cf6" stroke-width="2"/>
          <path d="M24 10v28M14 18h20M14 30h20" stroke="#06b6d4" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <h1 style="margin:6px 0 0; font-size:28px;">تسجيل الدخول</h1>
        <p class="muted">ادخل عالم «كارِه الشوجو» وتابع فصولك المفضلة.</p>
      </header>

      <!-- Signed-out -->
      <div id="signedOut">
        <button id="googleBtn" class="btn btn-google" style="width:100%;">
          <img src="/google.svg" alt="" width="18" height="18" />
          المتابعة مع Google
        </button>

        <div style="display:flex; align-items:center; gap:10px; margin:12px 0;">
          <div style="height:1px; flex:1; background:#263043;"></div>
          <span class="muted">أو</span>
          <div style="height:1px; flex:1; background:#263043;"></div>
        </div>

        <label class="field">
          <span>البريد الإلكتروني</span>
          <input id="email" type="email" placeholder="name@email.com" />
        </label>
        <label class="field">
          <span>كلمة المرور</span>
          <input id="password" type="password" placeholder="••••••••" />
        </label>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="emailLogin" class="btn" style="flex:1;">تسجيل الدخول</button>
          <button id="emailRegister" class="btn btn-ghost" style="flex:1;">إنشاء حساب</button>
        </div>

        <p id="msg" class="muted" style="min-height:22px; margin-top:6px;"></p>
      </div>

      <!-- Signed-in -->
      <div id="signedIn" style="display:none;">
        <div style="display:flex; gap:12px; align-items:center; margin:6px 0 16px;">
          <img id="avatar" src="/avatar-fallback.png" width="44" height="44" style="border-radius:50%; border:1px solid #2b364b;" alt="avatar" />
          <div>
            <div id="displayName" style="font-weight:700;">مستخدم</div>
            <div id="emailOut" class="muted small"></div>
          </div>
        </div>

        <div style="display:flex; gap:10px; margin-bottom:14px;">
          <a href="/novels/karih-al-shoujo" class="btn">اذهب إلى الرواية</a>
          <a href="/novels" class="btn btn-ghost">كل الروايات</a>
        </div>

        <button id="logoutBtn" class="btn btn-danger" style="width:100%;">تسجيل الخروج</button>
      </div>
    </div>
  </section>

  <!-- IMPORTANT: keep using the working file you already had -->
  <script type="module" src="/login.js"></script>
</Base>
