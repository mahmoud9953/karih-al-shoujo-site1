---
import Base from "@/layouts/Base.astro";

export interface Props { params: { slug: string } }
const { slug } = Astro.params as Props["params"];

type FM = { novel?: string; slug?: string; chapter?: number; title?: string; summary?: string; cover?: string; };
const files = import.meta.glob("/src/content/novels/**/*.md", { eager: true }) as Record<string, any>;

const chapters: FM[] = [];
for (const mod of Object.values(files)) {
  const fm: FM = mod.frontmatter ?? {};
  if (fm.slug === slug) chapters.push(fm);
}
chapters.sort((a,b)=>(a.chapter??0)-(b.chapter??0));

const metaTitle = chapters[0]?.novel ?? slug;
const cover = chapters[0]?.cover ?? "/cover3.png";
---

<Base title={`${metaTitle} — الفصول`}>
  <section class="container" dir="rtl" style="padding:26px 0;">
    <div class="novel-head glass">
      <img src={cover} alt={metaTitle} />
      <div class="meta">
        <h1 style="margin:0
