---
import Base from "@/layouts/Base.astro";
<section class="hero" dir="rtl" style="padding:80px 0 40px; background:
  linear-gradient(180deg, rgba(8,10,16,.0), rgba(8,10,16,.35)),
  url('/cover3.png') center/cover no-repeat;">
  <div class="container glass" style="padding:24px;">
    <h1 style="font-size:36px; margin:0 0 8px;">ูุฑุญุจูุง ุจู ูู ุนุงูู ุงูุบููุถ</h1>
    <p class="muted" style="max-width:60ch;">
      ูู ุดูุก ุถุจุงุจูโฆ ุญุชู ุงูุญูููุฉ. ุงุฏุฎู ุนุงูู ยซูุงุฑูู ุงูุดูุฌูยป ุญูุซ ุชุชูุงุทุน ุงูููู ูุงููุฏุฑ.
    </p>
    <div style="display:flex; gap:12px; margin-top:14px;">
      <a class="btn" href="/novels/karih-al-shoujo">ุงุจุฏุฃ ุงููุฑุงุกุฉ</a>
      <a class="btn btn-ghost" href="/novels">ูู ุงูุฑูุงูุงุช</a>
    </div>
  </div>
</section>

// Load chapters for "karih-al-shoujo"
const all = import.meta.glob("/src/content/novels/**/*.md", { eager: true });
type FM = { title?: string; novel?: string; slug?: string; chapter?: number; summary?: string };
const chapters: FM[] = [];
for (const mod of Object.values(all) as any[]) {
  const fm: FM = mod.frontmatter || {};
  if (fm.slug === "karih-al-shoujo") chapters.push(fm);
}
chapters.sort((a,b)=>(a.chapter??0)-(b.chapter??0));
const novelTitle = chapters[0]?.novel || "ูุงุฑู ุงูุดูุฌู";
---

<Base title="ุงูุฑุฆูุณูุฉ โ ูููุน ุงูุฑูุงูุงุช" description={`ุงูุฑุฃ ${novelTitle} ูุตููุง ูุตููุง ุจุณุฑุนุฉ CDN`}>
  <h1>ูุฑุญุจูุง ุจู ๐</h1>

  <p style="font-family:'Amiri', serif; font-size:1.4rem;">
    ๐ ุบูุต ูู ุนุงูู ยซูุงุฑู ุงูุดูุฌูยป โ ุฑูุงูุฉ ุชูุฒุฌ ุงูุบููุถ ุจุงููุดุงุนุฑ ูู ุฑุญูุฉ ูุง ุชููุณู.
  </p>
<p style="margin-top:16px;"><a href="/login">ุชุณุฌูู ุงูุฏุฎูู</a></p>

  <div class="card" style="margin-top:1rem; text-align:center;">
    <img src="/cover3.png" alt="ุบูุงู ุฑูุงูุฉ ูุงุฑู ุงูุดูุฌู" style="width:100%;border-radius:16px;margin-bottom:1rem;"/>
    <strong style="display:block; font-size:1.2rem; margin-bottom:.4rem;">ุฑูุงูุฉ ูุงุฑู ุงูุดูุฌู</strong>

    <ol class="toc" id="toc" style="text-align:right; margin:0 auto; max-width:64ch;">
      {chapters.map((c)=>(
        <li style="margin:.5rem 0;">
          <a href={`/novels/${c.slug}/${c.chapter}`}>
            ุงููุตู {c.chapter}: {c.title ?? `ุงููุตู ${c.chapter}`}
          </a>
          {c.summary && <span class="muted"> โ {c.summary}</span>}
        </li>
      ))}
    </ol>
  </div>
</Base>
