---
const { title = "موقع الروايات", description = "" } = Astro.props;
import authUiUrl from "../lib/auth-ui.js?url"; // bundled URL
---
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700;900&family=Tajawal:wght@400;500&display=swap" rel="stylesheet" />
    <style>
      :root{ --ink:#e7e9ee; --muted:#b3b9c7; --stroke:rgba(255,255,255,.08); --glass:rgba(255,255,255,.04); --bg:#0b0f14; }
      html,body{height:100%}
      body{margin:0;color:var(--ink);background:
        radial-gradient(1200px 600px at 75% -10%, rgba(110,168,255,.07), transparent 60%),
        radial-gradient(1000px 500px at 10% 110%, rgba(190,120,255,.06), transparent 55%),
        var(--bg);}
      .container{ width:min(1100px,92vw); margin-inline:auto }
      header.nav{position:sticky; top:0; z-index:50; backdrop-filter:blur(10px); background:rgba(5,7,10,.55); border-bottom:1px solid var(--stroke)}
      .nav-inner{display:flex; align-items:center; justify-content:space-between; height:56px}
      .links{display:flex; gap:14px; align-items:center}
      .card{ background:var(--glass); border:1px solid var(--stroke); border-radius:16px }
      .muted{ color:var(--muted) }
      #authArea{ display:flex; align-items:center; gap:10px }
      #authAvatar{ display:none; width:28px; height:28px; border-radius:50%; border:1px solid var(--stroke); object-fit:cover }
      #authMenu{ position:relative; display:none }
      #authMenuList{ position:absolute; right:0; top:34px; min-width:160px; background:var(--glass); border:1px solid var(--stroke); border-radius:10px; padding:6px; display:none; z-index:20 }
      .btn{ padding:10px 14px; border-radius:12px; border:1px solid var(--stroke); background:transparent; color:var(--ink); cursor:pointer }
    </style>
  </head>
  <body>
    <header class="nav">
      <div class="container nav-inner">
        <div class="links">
          <a href="/" style="text-decoration:none;color:inherit;font-weight:800">موقع الروايات</a>
          <a href="/">الرئيسية</a>
          <a href="/novels">كل الروايات</a>
        </div>

        <div id="authArea">
          <img id="authAvatar" alt="avatar" />
          <a id="authLink" class="btn" href="/login">تسجيل الدخول</a>
          <div id="authMenu">
            <button id="authMenuBtn" class="btn" style="padding:6px 10px;">القائمة ▾</button>
            <div id="authMenuList">
              <a href="/">الصفحة الرئيسية</a>
              <button id="signOutBtn" class="btn" style="width:100%;margin-top:6px">تسجيل الخروج</button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="container">
      <slot />
    </main>

    <!-- one external module; NO inline imports -->
    <script type="module" src={authUiUrl}></script>
  </body>
</html>
